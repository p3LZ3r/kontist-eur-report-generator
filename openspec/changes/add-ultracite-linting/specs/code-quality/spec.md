# Code Quality Specification

## ADDED Requirements

### Requirement: Automated Code Linting

The project SHALL use Ultracite (built on Biome) for automated code linting and quality checks.

#### Scenario: Linting TypeScript files
- **GIVEN** a TypeScript file with code quality issues (unused variables, inconsistent formatting)
- **WHEN** running `npm run lint`
- **THEN** Ultracite SHALL detect and report all linting errors
- **AND** the exit code SHALL be non-zero if errors are found
- **AND** the output SHALL include file paths and line numbers for each issue

#### Scenario: Passing lint check
- **GIVEN** a codebase with no linting errors
- **WHEN** running `npm run lint`
- **THEN** Ultracite SHALL report zero errors
- **AND** the exit code SHALL be zero
- **AND** the output SHALL indicate successful completion

#### Scenario: Pre-commit validation
- **GIVEN** a developer attempting to commit code
- **WHEN** they run `npm run lint` before committing
- **THEN** they SHALL receive immediate feedback on code quality issues
- **AND** the check SHALL complete in under 5 seconds for typical changes

### Requirement: Automated Code Formatting

The project SHALL use Ultracite for consistent code formatting across all TypeScript and JavaScript files.

#### Scenario: Auto-formatting code
- **GIVEN** a TypeScript file with inconsistent formatting
- **WHEN** running `npm run format`
- **THEN** Ultracite SHALL automatically format the file according to project rules
- **AND** the file SHALL be modified in place with consistent:
  - 2-space indentation
  - No semicolons
  - Single quotes for strings
  - Trailing commas in multi-line structures
  - Consistent import sorting

#### Scenario: Format check without modifying
- **GIVEN** code that needs formatting
- **WHEN** running `npm run format:check`
- **THEN** Ultracite SHALL report formatting issues without modifying files
- **AND** the exit code SHALL be non-zero if formatting is needed
- **AND** the output SHALL list all files requiring formatting

#### Scenario: CI/CD format validation
- **GIVEN** code pushed to a pull request
- **WHEN** CI runs format validation
- **THEN** the build SHALL fail if code is not properly formatted
- **AND** developers SHALL be notified of formatting requirements

### Requirement: Zero-Configuration Setup

The linting and formatting solution SHALL work out-of-the-box without custom configuration files.

#### Scenario: New developer onboarding
- **GIVEN** a developer cloning the repository for the first time
- **WHEN** they run `npm install` followed by `npm run lint`
- **THEN** linting SHALL work immediately without additional setup
- **AND** no configuration files SHALL need to be created or modified
- **AND** the default rules SHALL be appropriate for React/TypeScript projects

#### Scenario: Configuration-free updates
- **GIVEN** a new version of Ultracite is released
- **WHEN** the package is updated via `npm update`
- **THEN** improved rules SHALL be automatically applied
- **AND** no manual configuration migration SHALL be required

### Requirement: Performance Standards

The linting and formatting tools SHALL execute quickly to support rapid development workflows.

#### Scenario: Incremental linting performance
- **GIVEN** a single file with changes
- **WHEN** running `npm run lint`
- **THEN** the check SHALL complete in under 2 seconds
- **AND** only changed files SHALL be analyzed

#### Scenario: Full project lint performance
- **GIVEN** the entire codebase (approximately 10,000+ lines)
- **WHEN** running `npm run lint` on all files
- **THEN** the check SHALL complete in under 10 seconds
- **AND** the performance SHALL be at least 10x faster than previous ESLint setup

### Requirement: AI Code Generation Compatibility

The linting rules SHALL be optimized for code generated by AI tools.

#### Scenario: Claude Code generated code
- **GIVEN** code generated by Claude Code following project conventions
- **WHEN** the generated code is validated with `npm run lint`
- **THEN** the code SHALL pass linting without requiring manual fixes
- **AND** formatting SHALL match human-written code standards

#### Scenario: Consistent style across AI and human code
- **GIVEN** a file with both human-written and AI-generated code
- **WHEN** running `npm run format`
- **THEN** all code SHALL be formatted consistently
- **AND** there SHALL be no visual distinction between sources
- **AND** code reviews SHALL focus on logic rather than style
